<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>YOUDE TEST PAGE</title>
  <!-- CSS goes in the document HEAD or added to your external stylesheet -->
  <style type="text/css">
    table.gridtable {
      font-family: verdana, arial, sans-serif;
      font-size: 11px;
      color: #333333;
      border-width: 1px;
      border-color: #666666;
      border-collapse: collapse;
    }

    table.gridtable th {
      border-width: 1px;
      padding: 8px;
      border-style: solid;
      border-color: #666666;
      background-color: #dedede;
    }

    table.gridtable td {
      border-width: 1px;
      padding: 8px;
      border-style: solid;
      border-color: #666666;
      background-color: #ffffff;
    }
  </style>
  <!--<script type="text/javascript" src="jquery.qrcode.min.js"></script>-->
  <!--<script type="text/javascript" src="jquery.min.js"></script>-->
  <script type="text/javascript" src="qrtest/jquery.min.js"></script>
  <script type="text/javascript" src="qrtest/jquery.qrcode.min.js"></script>
  <!--<script type="text/javascript" src="jquery.qrcode.js"></script>-->
  <!--<script type="text/javascript" src="qrcode.js"></script>-->

  <script>
    var feedbackdata;

    function S2SPOST(urlvalue, params) {
      var xmlhttp = new XMLHttpRequest();
      //同步请求
      xmlhttp.open("POST", urlvalue, false);
      //异步请求
      // xmlhttp.open("POST", urlvalue, true);

      xmlhttp.setRequestHeader("X-Auth-Token", "test-110")
      //xmlhttp.setRequestHeader("cache-control", "no-cache");
      xmlhttp.setRequestHeader("contentType", "text/html;charset=uft-8") //指定发送的编码
      //var parm = "act=" + act + "&cityname=" + cityname + "&antique=" + antique;//构造URL参数
      xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");  //设置请求头信息
      //判断URL调用的状态值并处理
      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          feedbackdata = xmlhttp.responseText;
          document.getElementById("test").innerHTML = xmlhttp.responseText;
        }
      }
      xmlhttp.send(params);//设置为发送给服务器数据
      document.getElementById("oplog").innerHTML = "当前操作时间" + new Date();
    }

    function S2SGET(urlvalue, params) {
      var xmlhttp = new XMLHttpRequest();
      //同步请求
      xmlhttp.open("GET", urlvalue + "?" + params, false);
      //异步请求
      // xmlhttp.open("GET", urlvalue + "?" + params,  true);

      xmlhttp.setRequestHeader("X-Auth-Token", "test-110")
      xmlhttp.setRequestHeader("contentType", "text/html;charset=uft-8") //指定发送的编码
      xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");  //设置请求头信息
      //判断URL调用的状态值并处理
      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          feedbackdata = xmlhttp.responseText;
          document.getElementById("test").innerHTML = xmlhttp.responseText;
        }
      }
      xmlhttp.send();//设置为发送给服务器数据
      document.getElementById("oplog").innerHTML = "当前操作时间" + new Date();
    }

    function S2SPUT(urlvalue, params) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.open("PUT", urlvalue, true);
      xmlhttp.setRequestHeader("X-Auth-Token", "test-110")
      xmlhttp.setRequestHeader("contentType", "text/html;charset=uft-8") //指定发送的编码
      xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");  //设置请求头信息
      //判断URL调用的状态值并处理
      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          document.getElementById("test").innerHTML = xmlhttp.responseText;
        }
      }
      xmlhttp.send(params);//设置为发送给服务器数据
      document.getElementById("oplog").innerHTML = "当前操作时间" + new Date();
    }

  </script>
</head>
<body>
<div id="dgx" style="z-index: 9999; position: fixed ! important; left: 0px; top: 0px;">
  <div style="z-index: 9999; position: fixed ! important; right: 0px; top: 0px;">
    <textarea id="oplog"
              style="width: 100px; height: 200px; font-family: 'Courier New'; font-size: 12px; line-height: 1.5;"></textarea>
  </div>
  <div id="dg" style="z-index: 9999; position: fixed ! important; left: 0px; top: 0px;">
  <textarea id="test"
            style="width: 1024px; height: 200px; font-family: 'Courier New'; font-size: 12px; line-height: 1.5;">
  Hello Minders!
</textarea>
  </div>

  <!-- Table goes in the document BODY -->
  <div style="height: 200px;">head</div>
  <table class="gridtable">
    <tr>
      <th>分类</th>
      <th>URL值</th>
      <th>参数值</th>
      <th>测试按钮</th>
    </tr>

    <script>
      function validatevendor() {
        S2SPOST("qr/validate", "str=" + document.getElementById("stringvalue").value);
      }
    </script>
    <tr>
      <td>二维友验证 接口
      </td>
      <td>
        /qr/validate
      </td>
      <td>
        <br>* 二维码验证接口
        <br>* @param tokenR 本接口需要 使用 tokenid
        <br>* @param str 二维码加密字符串
        <br>* @return 正常返回时为，json 对象中 fncode 表示对应的功能标识 buslist 表示对应的 业务实体
        <br>填入用户号： <input type="text" id="stringvalue"
                          value="udemdbd4sbycv43c7cc7b151172f6532ebdf9c3008"
                          style="width: 100px; "></input></td>
      <td>
        <button type="button" onclick="validatevendor();">测试</button>
      </td>
    </tr>

    <script>

      function getqrcode() {
         S2SGET("qropen/erp/getqrcode", "vid=" + document.getElementById("ptype").value);
        var x = JSON.parse(feedbackdata);
        $('#qrcode').empty();
        $('#qrcode').qrcode({
          text: x.msg,
          width: 100,
          height: 100
        });
      }
    </script>
    <tr>
      <td>查询商家二维码
      </td>
      <td></td>
      <td>
        填写商家唯一标识： <input type="text" id="ptype" value="1" style="width: 100px; "></input><br>
        <div id="qrcode" style="height: 100px;width: 100px;"></div>
      </td>
      <td>
        <button type="button" onclick="getqrcode()">查询客户二维码信息并生成</button>
      </td>
    </tr>

    <script>

      function getactivitycode() {
        S2SPOST("t/show/activity", "acid=" + document.getElementById("activitycode").value);
        var x = JSON.parse(feedbackdata);
        $('#qrcodex').empty();
        $('#qrcodex').qrcode({
          text: x.msg,
          width: 100,
          height: 100
        });
      }
    </script>
    <tr>
      <td>查询所有活动信息
      </td>
      <td></td>
      <td>
        活动唯一标识： <input type="text" id="activitycode" value="1" style="width: 100px; "></input><br>
        <div id="qrcodex" style="width: 100px;"></div>
      </td>
      <td>
        <button type="button" onclick="getactivitycode()">查询活动信息</button>
      </td>
    </tr>

    <script>

      function getactivitycodevalidate() {
        S2SPOST("qr/validate", "str=" + document.getElementById("activityvalue").value);
        var x = JSON.parse(feedbackdata);
      }
    </script>
    <tr>
      <td>纸质代金券生成测试
      </td>
      <td></td>
      <td>
        活动唯一标识： <input type="text" id="activityvalue" value="paper001cb229f8b43ee5fd2a7c3d1f55125f8d0" style="width: 100px; "></input><br>
      </td>
      <td>
        <button type="button" onclick="getactivitycodevalidate()">生成</button>
      </td>
    </tr>

    <script>

      function getactivitypapercode() {
        S2SGET("qropen/erp/getactiveqrcode", "aid=" + document.getElementById("activityid").value);
        var x = JSON.parse(feedbackdata);
      }
    </script>
    <tr>
      <td>纸质代金券生成测试
      </td>
      <td></td>
      <td>
        活动唯一标识： <input type="text" id="activityid" value="1" style="width: 100px; "></input><br>
      </td>
      <td>
        <button type="button" onclick="getactivitypapercode()">生成纸质代金券</button>
      </td>
    </tr>

  </table>


</body>
</html>